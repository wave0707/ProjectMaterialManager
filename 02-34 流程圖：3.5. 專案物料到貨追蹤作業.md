# 流程圖：3.5. 專案物料到貨追蹤作業

* **文件版本**: 1.0
* **制定日期**: 2025年7月5日
* **制定者**: William He
* **模組**：3. 專案管理
* **文件狀態**：流程圖語法已更新為 Mermaid。

---

這份流程圖詳細描述了權責人員（如：專案經理、採購人員）如何透過系統，追蹤特定專案已下訂採購單的物料到貨狀況。

### 流程圖說明

1.  **開始**：流程由使用者進入「專案物料到貨追蹤作業」功能頁面開始。
2.  **輸入條件**：使用者必須先選擇一個要追蹤的「專案」。此外，還可以輸入「採購單號」、「供應商」、「物料名稱」等條件來進一步篩選。
3.  **系統分析與整合**：
    * 使用者點擊「查詢」後，系統會在背景整合多張資料表的資訊：
        * **查詢採購單**：首先，根據專案篩選出所有相關的 `Procurement.OrderHeaders` 與 `Procurement.OrderLines`，取得「訂購量」。
        * **查詢預先出貨通知 (ASN)**：接著，查詢是否有供應商已提交的 `Procurement.AdvanceShippingNoticeHeaders`，以取得「預計到貨日」。
        * **查詢收貨紀錄**：最後，查詢 `Inventory.GoodsReceiptLines`，加總該採購單品項的「已收貨量」。
4.  **顯示追蹤報告**：
    * 系統將整合後的資訊以報表形式呈現。
    * 報表會清楚列出每一筆採購單品項的「訂購量」、「已收貨量」、「未交量 (訂購量 - 已收貨量)」以及「預計到貨日」與「狀態」（例如：未出貨、部分到貨、完全到貨）。
5.  **結束**：使用者獲得清晰的物料到貨進度概覽。

### Mermaid 語法

```mermaid
---
title: 3.5. 專案物料到貨追蹤作業流程圖
---
flowchart TD
    %% Node Definitions
    subgraph 使用者
        A1("開始: 進入<br>專案物料到貨追蹤功能")
        A2("選擇「專案」及其他篩選條件")
        A3("點擊「查詢」")
    end

    subgraph "系統後台資料整合"
        B1["查詢專案相關的採購單 &#40;PO&#41;<br>以取得&#12300;訂購量&#12301;"]
        B2["查詢預先出貨通知 &#40;ASN&#41;<br>以取得&#12300;預計到貨日&#12301;"]
        B3["查詢收貨單 &#40;GRN&#41;<br>以取得&#12300;已收貨量&#12301;"]
        B4["計算&#12300;未交量&#12301;"]
    end

    subgraph 系統
        C1["以報表形式顯示追蹤結果"]
    end

    subgraph Note1 [報表欄位範例]
        N1["· 訂購量<br>· 已收貨量<br>· 未交量<br>· 預計到貨日<br>· 狀態"]
    end

    %% Link Definitions
    A1 --> A2
    A2 --> A3
    A3 --> B1
    
    B1 --> B2
    B2 --> B3
    B3 --> B4
    B4 --> C1
    C1 --> Z(結束)

    C1 -.-> Note1
    style Note1 fill:#lightyellow,stroke:#333,stroke-dasharray: 5 5