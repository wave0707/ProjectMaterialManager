# 流程圖：2.2. 物料規格查詢作業

* **文件版本**: 1.0
* **制定日期**: 2025年7月5日
* **制定者**: William He
* **模組**：2. 主檔資料管理
* **文件狀態**：流程圖語法已更新為 Mermaid。

---

這份流程圖詳細描述了任何有權限的使用者，在系統中透過多維度條件查詢特定物料及其詳細規格的完整操作步驟。

### 流程圖說明

1.  **開始**：流程由使用者進入「物料規格查詢作業」功能頁面開始。
2.  **選擇查詢方式**：
    * 系統提供一個強大的搜尋介面，允許使用者用不同的方式查詢：
        * **基本查詢**：透過「物料編號」或「物料名稱」進行快速、精準的搜尋。
        * **分類查詢**：透過下拉選單選擇「主分類」、「品牌」、「次分類」來縮小範圍。
        * **規格查詢 (核心)**：這是一個動態的查詢區塊。當使用者選擇了某個「主分類」後，系統會**動態載入該分類專屬的規格欄位**供使用者查詢。例如，選擇「塑膠管」，系統就會出現「管徑」、「壁厚」等查詢欄位。
3.  **執行查詢**：
    * 使用者輸入一個或多個查詢條件後，點擊「查詢」。
    * 系統會根據條件，到 `Material.Masters` 以及對應的 `Material.Spec_*` 規格表中進行聯合查詢 (JOIN)。
4.  **顯示結果**：
    * 系統以列表形式呈現所有符合條件的物料。
    * 使用者可以點擊任一筆紀錄，查看該物料的完整詳細資訊。系統會將共通資訊與專有規格資訊整合在同一個畫面中，一目了然。
5.  **結束**：完成查詢作業。

### Mermaid 語法

```mermaid
---
title: 2.2. 物料規格查詢作業流程圖
---
flowchart TD
    %% Node Definitions
    subgraph 使用者
        A1("開始: 進入<br>物料規格查詢作業")
        A2{選擇查詢方式}
        A3("輸入物料編號或名稱")
        A4("選擇主分類/品牌/次分類")
        A5a("選擇主分類")
        A5b("輸入特定規格條件")
        A6("點擊「查詢」")
        A7{要查看明細？}
    end

    subgraph 系統
        B1("提供多維度查詢介面")
        B2("動態載入該分類的<br>專有規格欄位")
        B3("根據條件聯合查詢<br>Material.Masters 與 Material.Spec_* 表<br>並以列表顯示結果")
        B4("顯示該物料的完整共通資訊<br>與專有規格")
    end

    %% Link Definitions
    A1 --> B1
    B1 --> A2
    
    A2 -- "基本查詢" --> A3 --> A6
    A2 -- "分類查詢" --> A4 --> A6
    
    A2 -- "規格查詢" --> A5a
    A5a --> B2
    B2 --> A5b
    A5b --> A6
    
    A6 --> B3
    B3 --> A7
    
    A7 -- "是" --> B4
    B4 --> Z(結束)
    A7 -- "否" --> Z