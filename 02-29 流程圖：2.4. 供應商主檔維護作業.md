# 流程圖：2.4. 供應商主檔維護作業

* **文件版本**: 1.0
* **制定日期**: 2025年7月5日
* **制定者**: William He
* **模組**：2. 主檔資料管理
* **文件狀態**：流程圖語法已更新為 Mermaid。

---

這份流程圖詳細描述了權責人員（如：採購、管理部門）在系統中建立、查詢、修改及停用供應商主檔的完整操作步驟。

### 流程圖說明

1.  **開始**：流程由使用者進入「供應商主檔維護作業」功能頁面開始。
2.  **查詢/修改/停用流程**：
    * 使用者可透過「供應商代碼」、「公司名稱」、「統一編號」等條件查詢。
    * 系統顯示符合條件的供應商列表。
    * 使用者可選擇任一筆進行「修改」或「停用」。
3.  **新增流程 (核心)**：
    * 使用者點擊「新增」按鈕。
    * 使用者需填寫供應商的完整資料，通常包含：
        * **基本資訊**：公司名稱、統一編號、地址、聯絡電話。
        * **聯絡人資訊**：主要聯絡人、職稱、Email。
        * **財務資訊**：銀行帳戶、付款條件等。
    * 使用者填寫完所有資訊後，點擊「儲存」。
4.  **系統處理 (新增)**：
    * 系統進行資料驗證。
    * 驗證通過後，系統會：
        * 根據編碼原則（前綴'V' + 流水號），**自動生成唯一的「供應商代碼 (`SupplierCode`)」**（例如：`V000001`）。
        * 將新的供應商資料存入 `Core.SupplierMaster` 資料表。
5.  **結束**：供應商主檔成功建立或更新。

### Mermaid 語法

```mermaid
---
title: 2.4. 供應商主檔維護作業流程圖
---
flowchart TD
    %% Node Definitions
    subgraph 使用者
        A1("開始: 進入<br>供應商主檔維護")
        A2{要新增？}

        A3("輸入查詢條件")
        A4("點擊「查詢」")
        A5("從列表中選擇一筆")
        A6{要修改？}
        A7("修改資料後<br>點擊「儲存」")
        A8("點擊「停用」")
        A9{確認？}
        
        A10("點擊「新增」")
        A11("填寫供應商基本資料、<br>聯絡人、財務資訊等")
        A12("點擊「儲存」")
    end

    subgraph 系統
        B1("顯示符合條件的<br>供應商列表")
        B2("載入該供應商的資料")
        B3("驗證並更新資料庫")
        B4("要求確認")
        B5("更新該供應商狀態為「停用」")
        
        B6{資料驗證成功？}
        B8("顯示錯誤訊息")
        
        C1["根據編碼原則<br>自動生成「供應商代碼」"]
        C2["將資料存入<br>Core.SupplierMaster 表"]
        B7("顯示「建立成功」訊息")
    end

    %% Link Definitions
    A1 --> A2
    
    %% Query/Modify/Disable Path
    A2 -- "否，查詢/修改/停用" --> A3 --> A4 --> B1 --> A5 --> A6
    A6 -- "是" --> B2 --> A7 --> B3 --> Z(結束)
    A6 -- "否，停用" --> A8 --> B4 --> A9
    A9 -- "是" --> B5 --> Z
    A9 -- "否" --> A5
    
    %% New Path
    A2 -- "是" --> A10 --> A11 --> A12 --> B6
    B6 -- "是" --> C1 --> C2 --> B7 --> Z
    B6 -- "否" --> B8 --> A10