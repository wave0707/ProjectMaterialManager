# 流程圖：1.2. 出庫管理整體流程

* **文件版本**: 1.0
* **制定日期**: 2025年7月5日
* **制定者**: William He
* **模組**：1. 物料管理核心流程
* **文件狀態**：流程圖語法已更新為 Mermaid。

---

這份流程圖從一個更高的視角，展示了物料從案場提出申請、主管審核、倉庫發料到最終出庫的完整生命週期，並將先前定義的三個核心作業（1.2.1 至 1.2.3）串聯起來。

### 流程圖說明

1.  **開始 (提出申請)**：流程由案場人員根據施工需求，執行「1.2.1. 專案領料申請作業」，在系統中建立一張狀態為「待審核」的領料申請單。
2.  **審核**：權責主管（如：專案經理）接著執行「1.2.2. 領料申請審核作業」，對該申請單進行審核。
3.  **審核判斷**：
    * 若申請被駁回：流程結束，原申請人會收到駁回通知。
    * 若申請被核准：流程繼續往下，系統會通知倉庫人員準備發料。
4.  **發料 (庫存異動)**：倉庫管理人員根據核准的申請單，執行「1.2.3. 發料作業」。此步驟會揀貨、備料，並在系統上進行最終的發料確認，**正式從系統庫存中扣除物料**。
5.  **結束**：物料成功出庫，流程結束。

*(註：1.2.4. 發料記錄查詢作業是一個獨立的查詢功能，可以在任何時間點執行，因此未包含在此核心交易流程中。)*

### Mermaid 語法

```mermaid
---
title: 1.2. 出庫管理整體流程圖
---
flowchart TD
    subgraph 案場人員
        A1("開始: 執行「1.2.1. 專案領料申請作業」<br>建立領料單 (狀態: 待審核)")
    end

    subgraph 審核人員
        B1("執行「1.2.2. 領料申請審核作業」")
        B2{審核結果？}
    end

    subgraph 倉庫管理人員
        C1("執行「1.2.3. 發料作業」")
    end

    subgraph 系統
        D1([物料正式出庫<br>結束])
        D2([結束此申請流程])
    end

    subgraph Note1 [異動說明]
        N1["此步驟將正式異動庫存：<br>· 建立發料單<br>· 寫入庫存異動日誌<br>· 更新即時庫存"]
    end

    A1 --> B1
    B1 --> B2
    B2 -- "核准" --> C1
    B2 -- "駁回" --> D2
    C1 --> D1

    C1 -.-> Note1
    style Note1 fill:#lightyellow,stroke:#333,stroke-dasharray: 5 5