# 流程圖：1.3. 庫存調撥整體流程

* **文件版本**: 1.0
* **制定日期**: 2025年7月5日
* **制定者**: William He
* **模組**：1. 物料管理核心流程
* **文件狀態**：流程圖語法已更新為 Mermaid。

---

這份流程圖從一個更高的視角，展示了物料從提出調撥申請、審核到最終完成庫存轉移的完整生命週期，並將先前定義的核心作業串聯起來。

### 流程圖說明

1.  **開始 (提出申請)**：流程由相關人員根據庫存平衡或專案需求，執行「1.3.1. 庫存調撥申請作業」，在系統中建立一張狀態為「待執行」或「待審核」的調撥單。
2.  **審核 (可選)**：若流程需要，權責主管會接著執行「1.3.2. 庫存調撥審核作業」，對該申請單進行審核。
3.  **審核判斷**：
    * 若申請被駁回：流程結束，原申請人會收到駁回通知。
    * 若申請被核准 (或流程無需審核)：流程繼續往下，系統會通知倉管人員執行調撥。
4.  **執行調撥 (庫存異動)**：倉庫管理人員根據調撥單，執行「1.3.3. 庫存調撥執行作業」。此步驟會進行實體物料搬運，並在系統上進行最終的確認，**正式完成兩個儲位之間的庫存轉移**。
5.  **結束**：物料成功在系統中完成調撥，流程結束。

*(註：1.3.4. 調撥記錄查詢作業是一個獨立的查詢功能，可以在任何時間點執行，因此未包含在此核心交易流程中。)*

### Mermaid 語法

```mermaid
---
title: 1.3. 庫存調撥整體流程圖
---
flowchart TD
    subgraph 申請人員
        A1("開始: 執行「1.3.1. 庫存調撥申請作業」<br>建立調撥單") --> B1{流程是否<br>需要審核？}
    end

    subgraph 審核人員
        C1("執行「1.3.2. 庫存調撥審核作業」") --> C2{審核結果？}
    end
    
    subgraph 倉庫管理人員
        D1("執行「1.3.3. 庫存調撥執行作業」") --> E1("物料正式完成調撥") --> Z(結束)
    end
    
    subgraph Note1 [異動說明]
        N1["此步驟將正式異動庫存：<br>· 建立「調撥出」與「調撥入」紀錄<br>· 更新來源與目標儲位的庫存"]
    end

    B1 -- "是" --> C1
    B1 -- "否" --> D1
    C2 -- "核准" --> D1
    C2 -- "駁回" --> F1("接收駁回通知") --> F2("結束此申請流程") --> Z
    
    D1 -.-> Note1
    style Note1 fill:#lightyellow,stroke:#333,stroke-dasharray: 5 5