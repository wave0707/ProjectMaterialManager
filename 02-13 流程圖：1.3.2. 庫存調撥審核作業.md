# 流程圖：1.3.2. 庫存調撥審核作業

* **文件版本**: 1.0
* **制定日期**: 2025年7月5日
* **制定者**: William He
* **模組**：1.3. 庫存調撥
* **文件狀態**：流程圖語法已更新為 Mermaid。

---

這份流程圖詳細描述了當調撥申請被提交後，權責主管（如：倉庫主管）在系統中進行審核的完整操作步驟。

### 流程圖說明

1.  **開始**：流程由審核人員（如：倉庫主管）收到通知，或主動進入「庫存調撥審核作業」功能頁面開始。
2.  **查詢待審核項目**：
    * 系統會自動列出所有狀態為「待審核」的庫存調撥單。
    * 審核人員可以從列表中選擇一筆進行審核。
3.  **審核與決策**：
    * 系統顯示該調撥單的完整內容，包含來源、目的地、物料、數量及調撥原因。
    * **(系統輔助)**：系統可同時顯示來源端的「可用庫存」與目的端的「現有庫存」，作為審核的參考依據。
    * 審核人員根據資訊進行判斷，決定「核准」或「駁回」。
4.  **執行處理**：
    * 若選擇「核准」：
        * 審核人員點擊「核准」按鈕。
        * 系統會將該筆調撥單的 `Status` 更新為「已核准」或「待執行」。
        * 系統發送通知給相關執行人員（如：來源倉庫的倉管），告知有新的調撥單需要執行。
    * 若選擇「駁回」：
        * 審核人員點擊「駁回」按鈕。
        * 系統會要求審核人員必須填寫「駁回原因」。
        * 系統將 `Status` 更新為「已駁回」，並記錄駁回原因。
        * 系統發送通知給原申請人，告知其申請已被駁回及相關原因。
5.  **結束**：完成該筆調撥單的審核作業。

### Mermaid 語法

```mermaid
---
title: 1.3.2. 庫存調撥審核作業流程圖
---
flowchart TD
    %% Node Definitions
    subgraph 審核人員
        A1("開始: 進入<br>庫存調撥審核作業")
        A2("從列表中選擇<br>一筆調撥單")
        A3{審核結果？}
        A4("點擊「核准」")
        A5("點擊「駁回」")
        A6("填寫駁回原因")
    end
    
    subgraph 系統
        B1("顯示所有「待審核」的<br>調撥單列表")
        B2("顯示調撥單詳細內容")
        B3("更新調撥單狀態為「已核准」")
        B4("更新調撥單狀態為「已駁回」")
        B5("發送通知給<br>「執行人員」")
        B6("發送通知給<br>「原申請人」")
        B7("顯示「核准成功」訊息")
        B8("顯示「駁回成功」訊息")
    end

    subgraph Note1 [輔助資訊]
        N1["系統可輔助顯示：<br>· 來源端可用庫存<br>· 目的端現有庫存"]
    end

    %% Link Definitions
    A1 --> B1
    B1 --> A2
    A2 --> B2
    B2 --> A3
    
    A3 -- "核准" --> A4 --> B3 --> B5 --> B7 --> Z(結束)
    A3 -- "駁回" --> A5 --> A6 --> B4 --> B6 --> B8 --> Z(結束)

    B2 -.-> Note1
    style Note1 fill:#lightyellow,stroke:#333,stroke-dasharray: 5 5